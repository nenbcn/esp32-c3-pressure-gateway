; PlatformIO Project Configuration File
;
;   Build options: build flags, source filter
;   Upload options: custom upload port, speed and extra flags
;   Library options: dependencies, extra library storages
;   Advanced options: extra scripting
;
; Please visit documentation for the other options and examples
; https://docs.platformio.org/page/projectconf.html

[platformio]
; Entorno por defecto - comentar/descomentar según el entorno deseado

; opcione 1 Esp32 wroom
; default_envs = esp32_gateway
; description = Gateway Wifi PoC ESP32
;-------------------
;opcion 2 esp32_c3
;default_envs = esp32_c3_gateway
default_envs = esp32_c3_test   
description = Gateway Wifi PoC ESP32-C3
; src_dir = test  ; COMENTADO: compilamos desde src/ no test/
;-----------

[env:esp32_gateway]
platform = espressif32
board = esp32dev
framework = arduino
monitor_speed = 115200
build_src_filter = +<*>
lib_deps =
    ESP Async WebServer
    EEPROM
    WiFi
    HTTPClient
    Preferences
    knolleary/PubSubClient@^2.8.0
    me-no-dev/AsyncTCP
    bblanchon/ArduinoJson@^6.18.5
    adafruit/Adafruit NeoPixel@^1.11.0
lib_ignore =
    AsyncTCP_RP2040W
upload_port = /dev/cu.usbmodem1101
monitor_port = /dev/cu.usbmodem1101

[env:esp32_c3_gateway]
; Configuración específica para ESP32-C3 (Seeed XIAO ESP32-C3)
platform = espressif32
board = seeed_xiao_esp32c3
framework = arduino
monitor_speed = 115200
build_src_filter = +<*>
lib_deps =
    EEPROM
    WiFi
    HTTPClient
    Preferences
    knolleary/PubSubClient@^2.8.0
    me-no-dev/AsyncTCP
    bblanchon/ArduinoJson@^6.18.5
    adafruit/Adafruit NeoPixel@^1.11.0
lib_ignore =
    AsyncTCP_RP2040W

; Flags de compilación específicos para ESP32-C3
build_flags = 
    -D ESP32_C3                      ; Define macro para identificar ESP32-C3 en el código
    -D CORE_DEBUG_LEVEL=4           ; Nivel de debug del core (0=None, 1=Error, 2=Warn, 3=Info, 4=Debug, 5=Verbose)
    -D CONFIG_LOG_DEFAULT_LEVEL=1    ; Nivel de logging por defecto
    -D CONFIG_LOG_DEFAULT_LEVEL_WIFI=0  ; Nivel de logging específico para WiFi (0=None)

[env:esp32_c3_test]
platform = espressif32
board = seeed_xiao_esp32c3
framework = arduino
monitor_speed = 115200
upload_speed = 115200
upload_port = /dev/cu.usbmodem1101
monitor_port = /dev/cu.usbmodem1101
upload_flags = 
    --before=default_reset
    --after=hard_reset
build_flags = 
    -D ESP32_C3                      ; Define macro para identificar ESP32-C3 en el código
    -D CORE_DEBUG_LEVEL=4           ; Nivel de debug del core
    -D CONFIG_LOG_DEFAULT_LEVEL=1    ; Nivel de logging por defecto
lib_deps =
    ESP Async WebServer
    EEPROM
    WiFi
    HTTPClient
    Preferences
    knolleary/PubSubClient@^2.8.0
    me-no-dev/AsyncTCP
    bblanchon/ArduinoJson@^6.18.5
    adafruit/Adafruit NeoPixel@^1.11.0
    ESP32Ping
lib_ignore =
    AsyncTCP_RP2040W